!function(){var a=window.moarbb=window.moarbb||{},b=a.views=a.views||{};b.SlidingMenuView=Backbone.View.extend({className:"slidingMenuView",template:a.templates.SlidingMenu,events:{"click .burger":"_onBurgerClick","mousedown .burger":"_onBurgerStartDrag","touchstart .burger":"_onBurgerStartDrag",mousemove:"_onMouseMove",touchmove:"_onTouchMove",mouseup:"_onMouseUp",touchend:"_onTouchEnd"},initialize:function(a){if(!a.content)throw"You must supply a content parameter";if(!a.menu)throw"You must supply a menu parameter";this._content=a.content,this._menu=a.menu,this._header=a.header,this._menuIsOpen=!1,this._hideBurger=null!=a.hideBurger?a.hideBurger:!1,this._menuIsOpenOnLoad=null!=a.menuOpen?a.menuOpen:!1,this._menuWidth=a.menuWidth||300},render:function(){return this.$el.html(this.template({})),this.setContent(this._content),this.setMenu(this._menu),this.setHeader(this._header),this._hideBurger&&this.$(".burger").hide(),this._menuIsOpenOnLoad&&this.openMenu(!0),this},remove:function(){return this.stopListening(),this.$el.remove(),this._content.remove(),this._menu.remove(),this._headerView&&this._headerView.remove(),this},toggleMenu:function(){this._menuIsOpen?this.closeMenu():this.openMenu()},openMenu:function(a,b){(b||!this._menuIsOpen)&&(this._setMenuTargetTranslate(this._menuWidth,a),this._menuIsOpen=!0)},closeMenu:function(a,b){(b||this._menuIsOpen)&&(this._setMenuTargetTranslate(0,a),this._menuIsOpen=!1)},setMenu:function(a){this._menu!=a&&this._menu&&this._menu.remove(),this._menu=a,this.$(".menu").append(this._menu.$el),this._menu.render()},setContent:function(a,b){this._content!=a&&this._content&&this._content.remove(),this._content=a,this.$(".content").append(this._content.$el),this._content.render(),b||this.closeMenu(),this._setHeaderPadding()},setHeader:function(a){this._header!=a&&this._header&&this._header.remove(),this._header&&(this._header=a,this.$(".headerContent").append(this._header.$el),this._header.render(),this._setHeaderPadding())},_setHeaderPadding:function(){this.$(".content").css({"padding-top":this.$(".header").outerHeight()})},_setMenuTargetTranslate:function(a,b){var c=this.$(".container");b?c.removeClass("animated"):c.addClass("animated"),a=Math.max(0,Math.min(this._menuWidth,a)),c.css({"-webkit-transform":"translate("+a+"px, 0)","-ms-transform":"translate("+a+"px, 0)",transform:"translate("+a+"px, 0)"})},_onBurgerClick:function(){},_onBurgerStartDrag:function(a){return this._startMenuDrag(a),!1},_startMenuDrag:function(a){this._menuDragging=!0,this._mouseDownPosition=this._getPageOffsets(a),this._lastMousePosition=this._mouseDownPosition},_onTouchMove:function(a){this._onMouseMove(a)},_onMouseMove:function(a){if(!this._menuDragging)return!0;this._lastMousePosition=this._getPageOffsets(a);var b=this._getDragTranslate().x,c=this._menuIsOpen?this._menuWidth+b:b;return this._setMenuTargetTranslate(c,!0),!1},_onTouchEnd:function(a){this._onMouseUp(a)},_onMouseUp:function(){if(this._menuDragging){this._menuDragging=!1;var a=this._getDragTranslate().x;if(Math.abs(a)>3){var b=this._menuIsOpen?this._menuWidth+a:a;b=Math.max(0,Math.min(this._menuWidth,b)),b>=this._menuWidth/2?this.openMenu(!1,!0):this.closeMenu(!1,!0)}else this.toggleMenu();return!1}return!0},_getDragTranslate:function(){return{x:this._lastMousePosition.x-this._mouseDownPosition.x,y:this._lastMousePosition.y-this._mouseDownPosition.y}},_getPageOffsets:function(a){return a.originalEvent.touches?{x:a.originalEvent.touches[0].pageX,y:a.originalEvent.touches[0].pageY}:{x:a.pageX,y:a.pageY}}})}(),this.moarbb=this.moarbb||{},this.moarbb.templates=this.moarbb.templates||{},this.moarbb.templates.SlidingMenu=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="menu">\n</div>\n<div class="container animated">\n    <div class="header">\n        <div class="burger">&#9776;</div>\n        <div class="headerContent"></div>\n    </div>\n    <div class="content">\n    </div>\n</div>\n';return __p};